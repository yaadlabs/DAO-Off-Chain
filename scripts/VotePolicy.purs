module Scripts.VotePolicy
  ( unappliedVotePolicy
  ) where

import Contract.Prelude

import Contract.Monad (Contract, liftContractE)
import Contract.PlutusData (toData)
import Contract.Prim.ByteArray (ByteArray)
import Contract.Scripts
  ( MintingPolicy(PlutusMintingPolicy)
  , PlutusScript
  , applyArgs
  )
import Ctl.Internal.Types.Scripts (plutusV2Script)
import ScriptArguments.Types (ConfigurationValidatorConfig)
import Scripts.Utils (scriptStringToJson, toJsonBytes')

unappliedVotePolicy :: ConfigurationValidatorConfig -> Contract MintingPolicy
unappliedVotePolicy voteParams = do
  appliedVotePolicy <- liftContractE $ voteMintingPolicyScript `applyArgs`
    [ toData voteParams ]
  pure $ PlutusMintingPolicy appliedVotePolicy

voteMintingPolicyScript :: PlutusScript
voteMintingPolicyScript = plutusV2Script votePolicyByteArray

votePolicyByteArray :: ByteArray
votePolicyByteArray = toJsonBytes' $ scriptStringToJson votePolicyString

votePolicyString :: String
votePolicyString =
  "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KmZq5owJQARMhIiIiIwBwCDAFNXQmBQAEKmZq5owJAARMhIiIiIwBQCDAFNXQmBQAELGBQACbqgASM1UzAnIhEiJTNQARACIhMwBQAjM1UwBwIQBQBAAQGiJTNTADACEzAaACABEAEBcjIyUzNXNGBGACJkZmAqbrTV0JgTgBm601dCACbrTV0Jq6IAE1dEYEwAQqZmrmjAiABEwETAFNXQmBMAELGBMACbqgASIwJiJTNQAQCyITUAIiUzNXNGbjwAgCBMwLCJTNQAQESITUAIiUzNXNGbjwAgDRE1c0YFoAImAMAGACJgDABkZGSmZq5owIQARMBE3XGroTAkACFTM1c0YEAAImAebrjV0JgSABCxgSAAm6oAEjUAEiABIyUzNXNGA6YEQAImRkJGYAIAYARutNXQmrojAiACMAQ1dCYEIAIsbqgASNQASAKIyUzNXNGA2YEAAIm641dCYD4AIsbqgARAOEAESIAERIiABESIgAhEAEiIAMhIjACADIhIzABADACISIwAQAyIhIjMwAQBQBAAyM1ABAFAEIiMAMwAgATARIjMzVXPgAkAIRmAKauhACMAM1dEAEkwkQAREJEZgAgCABmAcRCREpmoAQmACAGRCagBESmZq5ozcOAOAEIAImZqYBIBQA4AYAokACJkxgBJJGDogV3JvbmcgbnVtYmVyIG9mIHRva2VucwATJjADSQEcOiBJbmNvcnJlY3QgbnVtYmVyIG9mIHRva2VucwA3LJIBEFZvdGUgTWludGVyIEJ1cm4ASQESOiBTeW1ib2wgbm90IGZvdW5kADcskgEIVm90ZSBORlQAIiIiIAQ3DpAAG4dIAI3DpACG4dIAZVc8qudIyMAEAEiMwAzACACABQ=="
